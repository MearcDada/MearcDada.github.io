{"title":"模板方法（Template Method）","slug":"DesignPatterns-templateMethod","date":"2022-12-27T16:00:00.000Z","updated":"2024-12-03T07:22:26.000Z","comments":true,"path":"api/articles/DesignPatterns-templateMethod.json","excerpt":null,"covers":["https://cdn.jsdelivr.net/gh/MearcDada/FigureBed//blog/image-20221228133650108.png"],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><h3 id=\"动机\"><a href=\"#动机\" class=\"headerlink\" title=\"动机\"></a>动机</h3><p>在软件构建过程中，对于某一项任务，它常常有稳定的整体操作结构，但各个子步骤却有很做变的需求，或者由于固有的原因(比如框架与应用之间的关系)而无法和任务的整体结构同时实现。</p>\n<h3 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h3><p>定义一个操作中的算法的骨架（稳定），而将一些步骤延迟(变化)到子类中。Template Method使得子类可以不改变(复用)一个算法的结构即可重定义(override重写)该算法的某些特定步骤。</p>\n<h4 id=\"结构\"><a href=\"#结构\" class=\"headerlink\" title=\"结构\"></a>结构</h4><p><img src=\"https://cdn.jsdelivr.net/gh/MearcDada/FigureBed//blog/image-20221228133650108.png\" alt=\"image-20221228133650108\"></p>\n<p>未使用模板方法的示例： </p>\n<p>结构化软件设计流程</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 某开发人员开发的lib库</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">lib</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step1</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step3</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step5</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 某开发人员开发的应用</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">app</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">step2</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step4</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 主程序</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 程序主流程</span></span><br><span class=\"line\">    lib mylib;</span><br><span class=\"line\">    app myapp;</span><br><span class=\"line\">    mylib.<span class=\"built_in\">step1</span>();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(myapp.<span class=\"built_in\">step2</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        mylib.<span class=\"built_in\">step3</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>; i&lt;<span class=\"number\">2</span>;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        myapp.<span class=\"built_in\">step4</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">     mylib.<span class=\"built_in\">step5</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"使用模板方法\"><a href=\"#使用模板方法\" class=\"headerlink\" title=\"使用模板方法\"></a>使用模板方法</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 某开发人员开发的lib库</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">lib</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span></span>&#123;   <span class=\"comment\">// 程序主流程</span></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"built_in\">step1</span>();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"built_in\">step2</span>())  <span class=\"comment\">// 支持变化 ==&gt; 虚函数的多态调用</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">step3</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>; i&lt;<span class=\"number\">2</span>;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">step4</span>(); <span class=\"comment\">// 支持变化 ==&gt; 虚函数的多态调用</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">     <span class=\"built_in\">step5</span>();</span><br><span class=\"line\">   &#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step1</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step3</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step5</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"type\">bool</span> <span class=\"title\">step2</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"type\">void</span> <span class=\"title\">step4</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"keyword\">virtual</span> ~<span class=\"built_in\">lib</span>()&#123;&#125;;  <span class=\"comment\">//  不加的话，子类无法析构</span></span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 某开发人员开发的应用</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">app</span> :<span class=\"keyword\">public</span> lib</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">step2</span><span class=\"params\">()</span></span>&#123;&#125;;  <span class=\"comment\">// 重写要执行的操作</span></span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step4</span><span class=\"params\">()</span></span>&#123;&#125;; <span class=\"comment\">// 重写要执行的操作</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 主程序</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    lib* mylib = <span class=\"keyword\">new</span> <span class=\"built_in\">app</span>();</span><br><span class=\"line\">    mylib.<span class=\"built_in\">run</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"总结：\"><a href=\"#总结：\" class=\"headerlink\" title=\"总结：\"></a>总结：</h3><blockquote>\n<p>Template Method模式是一种非常基础性的设计模式，在面向对象系统中有着大量的应用。它用最简洁的机制（虚函数的多态性）为很多应用程序框架提供了灵活的扩展点，是代码复用方面的基本实现结构。<br>除了可以灵活应对子步骤的变化外，“不要调用我，让我来调用你”的反向控制结构是Template Method的典型应用。<br>在具体实现方面，被Template Method调用的虚方法可以有实现，也可以没有任何实现（抽象方法、纯虚方法），但一般它们设置为protected方法。</p>\n</blockquote>\n","more":"<h3 id=\"动机\"><a href=\"#动机\" class=\"headerlink\" title=\"动机\"></a>动机</h3><p>在软件构建过程中，对于某一项任务，它常常有稳定的整体操作结构，但各个子步骤却有很做变的需求，或者由于固有的原因(比如框架与应用之间的关系)而无法和任务的整体结构同时实现。</p>\n<h3 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h3><p>定义一个操作中的算法的骨架（稳定），而将一些步骤延迟(变化)到子类中。Template Method使得子类可以不改变(复用)一个算法的结构即可重定义(override重写)该算法的某些特定步骤。</p>\n<h4 id=\"结构\"><a href=\"#结构\" class=\"headerlink\" title=\"结构\"></a>结构</h4><p><img src=\"https://cdn.jsdelivr.net/gh/MearcDada/FigureBed//blog/image-20221228133650108.png\" alt=\"image-20221228133650108\"></p>\n<p>未使用模板方法的示例： </p>\n<p>结构化软件设计流程</p>\n<figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 某开发人员开发的lib库</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">lib</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step1</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step3</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step5</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 某开发人员开发的应用</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">app</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">step2</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step4</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 主程序</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 程序主流程</span></span><br><span class=\"line\">    lib mylib;</span><br><span class=\"line\">    app myapp;</span><br><span class=\"line\">    mylib.<span class=\"built_in\">step1</span>();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(myapp.<span class=\"built_in\">step2</span>())</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        mylib.<span class=\"built_in\">step3</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>; i&lt;<span class=\"number\">2</span>;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        myapp.<span class=\"built_in\">step4</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">     mylib.<span class=\"built_in\">step5</span>();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"使用模板方法\"><a href=\"#使用模板方法\" class=\"headerlink\" title=\"使用模板方法\"></a>使用模板方法</h4><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 某开发人员开发的lib库</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">lib</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span></span>&#123;   <span class=\"comment\">// 程序主流程</span></span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"built_in\">step1</span>();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">if</span>(<span class=\"built_in\">step2</span>())  <span class=\"comment\">// 支持变化 ==&gt; 虚函数的多态调用</span></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">step3</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"type\">int</span> i=<span class=\"number\">0</span>; i&lt;<span class=\"number\">2</span>;i++)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        <span class=\"built_in\">step4</span>(); <span class=\"comment\">// 支持变化 ==&gt; 虚函数的多态调用</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">     <span class=\"built_in\">step5</span>();</span><br><span class=\"line\">   &#125;;</span><br><span class=\"line\"> </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step1</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step3</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step5</span><span class=\"params\">()</span></span>&#123;&#125;;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"type\">bool</span> <span class=\"title\">step2</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">virtual</span> <span class=\"type\">void</span> <span class=\"title\">step4</span><span class=\"params\">()</span> </span>= <span class=\"number\">0</span>;</span><br><span class=\"line\">   </span><br><span class=\"line\">   <span class=\"keyword\">virtual</span> ~<span class=\"built_in\">lib</span>()&#123;&#125;;  <span class=\"comment\">//  不加的话，子类无法析构</span></span><br><span class=\"line\">   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 某开发人员开发的应用</span></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">app</span> :<span class=\"keyword\">public</span> lib</span><br><span class=\"line\">&#123;</span><br><span class=\"line\"> <span class=\"keyword\">public</span>:</span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">bool</span> <span class=\"title\">step2</span><span class=\"params\">()</span></span>&#123;&#125;;  <span class=\"comment\">// 重写要执行的操作</span></span><br><span class=\"line\">    </span><br><span class=\"line\">   <span class=\"function\"><span class=\"type\">void</span> <span class=\"title\">step4</span><span class=\"params\">()</span></span>&#123;&#125;; <span class=\"comment\">// 重写要执行的操作</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 主程序</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"type\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    lib* mylib = <span class=\"keyword\">new</span> <span class=\"built_in\">app</span>();</span><br><span class=\"line\">    mylib.<span class=\"built_in\">run</span>();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"总结：\"><a href=\"#总结：\" class=\"headerlink\" title=\"总结：\"></a>总结：</h3><blockquote>\n<p>Template Method模式是一种非常基础性的设计模式，在面向对象系统中有着大量的应用。它用最简洁的机制（虚函数的多态性）为很多应用程序框架提供了灵活的扩展点，是代码复用方面的基本实现结构。<br>除了可以灵活应对子步骤的变化外，“不要调用我，让我来调用你”的反向控制结构是Template Method的典型应用。<br>在具体实现方面，被Template Method调用的虚方法可以有实现，也可以没有任何实现（抽象方法、纯虚方法），但一般它们设置为protected方法。</p>\n</blockquote>\n","categories":[{"name":"设计模式","path":"api/categories/设计模式.json"}],"tags":[{"name":"C++","path":"api/tags/C++.json"}]}